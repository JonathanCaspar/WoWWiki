(this["webpackJsonpwow-wiki"]=this["webpackJsonpwow-wiki"]||[]).push([[0],{104:function(e,t,a){},106:function(e,t,a){},107:function(e,t,a){},111:function(e,t,a){},112:function(e,t,a){"use strict";a.r(t);var n,r=a(0),c=a.n(r),o=a(17),s=a.n(o),u=(a(74),a(75),a(54)),l=a(55),i=a(30),m=a(67),d=a(66),f=a(114),p=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).state={value:""},n.handleCharacterSearch=n.handleCharacterSearch.bind(Object(i.a)(n)),n}return Object(l.a)(a,[{key:"handleCharacterSearch",value:function(e){var t=e.target.value,a=t.length>=1?t.substr(0,1).toUpperCase()+t.substr(1,t.length).toLowerCase():t;this.setState({value:a})}},{key:"render",value:function(){var e=this.props.t;return c.a.createElement("div",{className:"Characters"},c.a.createElement("h1",null,"Work in progress - not working"),c.a.createElement("h2",null,e("characters.title")),c.a.createElement("form",{onSubmit:null},c.a.createElement("label",null,e("characters.name-query"),c.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleCharacterSearch})),c.a.createElement("input",{type:"submit",value:e("common.load")})))}}]),a}(r.Component),b=Object(f.a)("common")(p),h=a(4),v=a(57),E=a(12),g=a(15),j=a(32),O=a(13),k=a(6),y=a.n(k),w=a(14),x=a(24),z=a(25),M=a(68),S=a(40),C=a.n(S),N="e1d9b7f970f44229bda1942d09d3ce97";function _(){return I.apply(this,arguments)}function I(){return(I=Object(w.a)(y.a.mark((function e(){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("...Requesting Auth Token"),e.next=3,C.a.post("https://us.battle.net/oauth/token",{},{auth:{username:"".concat(N),password:"".concat("68t8Dc1UBHEX3oQC3nMLXKINoQ7Mz4Ik")},params:{grant_type:"client_credentials"}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return W.apply(this,arguments)}function W(){return(W=Object(w.a)(y.a.mark((function e(){var t,a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("blizzard_token"),a=localStorage.getItem("blizzard_token_expire_time"),null===t){e.next=7;break}if(null===a){e.next=7;break}if(Math.floor(Date.now()/1e3)>a-900){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,_().then((function(e){t=e.data.access_token;var a=Math.floor(Date.now()/1e3)+e.data.expires_in;return console.log("... Putting in local storage blizzard_token : "+t),localStorage.setItem("blizzard_token",e.data.access_token),console.log("... Putting in local storage blizzard_token_expire_time : "+a),localStorage.setItem("blizzard_token_expire_time",a),e.data.access_token}),(function(e){return console.log("Blizzard API - error while fetching access token :"+e),null}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(e){return T.apply(this,arguments)}function T(){return(T=Object(w.a)(y.a.mark((function e(t){var a,n,r,c,o,s,u=arguments;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=u.length>1&&void 0!==u[1]?u[1]:{},n=a.body,r=Object(M.a)(a,["body"]),e.next=3,B();case 3:return c=e.sent,o={"Content-Type":"application/json"},s=Object(z.a)(Object(z.a)({method:n?"POST":"GET"},r),{},{headers:Object(z.a)(Object(z.a)(Object(z.a)({},o),r.headers),{},{Authorization:"Bearer ".concat(c)}),validateStatus:function(e){return 200===e}}),n&&(s.body=JSON.stringify(n)),e.abrupt("return",C()(t,Object(z.a)({},s)).then((function(e){return e}),(function(e){return Promise.reject(e.message)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}A.getMountIndex=function(){var e=Object(w.a)(y.a.mark((function e(t,a,n){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("https://eu.api.blizzard.com/data/wow/mount/index",{params:{region:"".concat(t),namespace:"".concat(a),locale:"".concat(n)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n){return e.apply(this,arguments)}}(),A.getMountById=function(){var e=Object(w.a)(y.a.mark((function e(t,a,n,r){return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A("https://eu.api.blizzard.com"+"/data/wow/mount/".concat(t),{params:{region:"".concat(a),namespace:"".concat(n),locale:"".concat(r)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,a,n,r){return e.apply(this,arguments)}}();var P=Object(x.b)("mounts/fetchMounts",Object(w.a)(y.a.mark((function e(){var t;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getMountIndex("eu","static-eu","fr_FR");case 2:return t=e.sent,e.abrupt("return",t.data.mounts);case 4:case"end":return e.stop()}}),e)})))),q=Object(x.b)("mounts/fetchMountById",function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,A.getMountById(t,"eu","static-eu","fr_FR");case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),L=Object(x.b)("mounts/fetchMountAsset",function(){var e=Object(w.a)(y.a.mark((function e(t){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,A(t.creature_displays[0].key.href);case 3:return a=e.sent,e.abrupt("return",a.data);case 7:return e.abrupt("return",Promise.reject("Need a mount object in order to fetch its asset"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),J=Object(x.c)({name:"mounts",initialState:{data:[],searchText:"",status:"idle",error:null,selectedMount:null,selectedMountAsset:"",selectedMountStatus:"idle",selectedMountError:null},reducers:{newMountClicked:function(e){e.selectedMount=null,e.selectedMountAsset="",e.selectedMountStatus="idle",e.selectedMountError=null},mountSearched:function(e,t){e.searchText=t.payload}},extraReducers:(n={},Object(O.a)(n,P.pending,(function(e){e.status="loading"})),Object(O.a)(n,P.fulfilled,(function(e,t){e.status="succeeded",e.data=e.data.concat(t.payload)})),Object(O.a)(n,P.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(O.a)(n,q.pending,(function(e){e.selectedMountStatus="loading"})),Object(O.a)(n,q.fulfilled,(function(e,t){e.selectedMountStatus="succeeded",e.selectedMount=t.payload})),Object(O.a)(n,q.rejected,(function(e,t){e.selectedMountStatus="failed",e.selectedMountError=t.payload})),Object(O.a)(n,L.fulfilled,(function(e,t){e.selectedMountAsset=t.payload.assets[0].value})),n)}),R=J.actions,U=R.newMountClicked,D=R.mountSearched,F=J.reducer,Q=(a(104),a(34));var X=function(e){var t=e.onChangeCallback,a=Object(r.useState)(""),n=Object(Q.a)(a,2),o=n[0],s=n[1];return c.a.createElement("div",{className:"search-bar"},c.a.createElement("form",null,c.a.createElement("input",{type:"text",value:o,onChange:function(e){s(e.target.value),t&&t(e.target.value.toLowerCase())}})))};var G=function(){var e,t=Object(E.b)(),a=Object(v.a)("common").t,n=Object(E.c)((function(e){return e.mounts.data.filter((function(t){return t.name.toLowerCase().includes(e.mounts.searchText)}))})),o=Object(E.c)((function(e){return e.mounts.status}));if(Object(r.useEffect)((function(){"idle"===o&&t(P())}),[o,t]),"loading"===o)e=c.a.createElement("div",{className:"center-div"},c.a.createElement(j.a,{animation:"border",role:"status",size:"sm"}),c.a.createElement("span",null,a("common.loading")," ..."));else if("succeeded"===o){e=n.slice().sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return c.a.createElement(g.b,{key:e.id,className:"nav-list-row",to:"/mounts/".concat(e.id)},e.name)}))}else"failed"===o&&(e=c.a.createElement("div",null,"Couldn't load mounts"));return c.a.createElement("div",{className:"col-3 col-sm-3"},c.a.createElement(X,{onChangeCallback:function(e){t(D(e))}}),c.a.createElement("div",{className:"nav-list"},e))};a(106);var H=function(e){var t,a=e.match.params.mountId,n=Object(E.b)(),o=Object(v.a)("common").t,s=Object(E.c)((function(e){return e.mounts.selectedMount})),u=Object(E.c)((function(e){return e.mounts.selectedMountStatus})),l=Object(E.c)((function(e){return e.mounts.selectedMountAsset}));return Object(r.useEffect)((function(){"idle"!==u&&n(U())}),[a,n]),Object(r.useEffect)((function(){"idle"===u&&n(q(a))}),[u,n]),Object(r.useEffect)((function(){s&&n(L(s))}),[s,n]),"loading"===u?t=c.a.createElement("div",{className:"center-div"},c.a.createElement(j.a,{animation:"border",role:"status",size:"sm"}),c.a.createElement("span",null,o("common.loading")," ...")):"succeeded"===u?t=c.a.createElement("div",null,c.a.createElement("div",{className:"mount-name"},s.name),c.a.createElement("div",{className:"mount-desc"},s.description),c.a.createElement("img",{src:l,alt:s.name})):"failed"===u&&(t=c.a.createElement("div",null,"The mount id ",a," does not exist.")),c.a.createElement("div",{className:"mount-viewer col-9 col-sm-9"},t)};a(107);var K=function(){var e=Object(v.a)("common").t;return c.a.createElement("div",{className:"Mounts"},c.a.createElement("h2",null,e("mounts.title")),c.a.createElement("div",{className:"mounts-nav-container"},c.a.createElement(G,null),c.a.createElement(h.a,{path:"/mounts/:mountId",component:H})))};var V=function(){var e=Object(v.a)("common").t;return c.a.createElement("div",{className:"Pets"},c.a.createElement("h1",null,"Work in progress - not working"),c.a.createElement("h2",null,e("pets.title")))},Y=a(61),Z=a.n(Y),$=a(62),ee=a(28),te=a(65);var ae=function(){var e=Object(r.useState)("en"),t=Object(Q.a)(e,2),a=t[0],n=t[1],o=Object(v.a)("common"),s=o.t,u=o.i18n,l=function(e){return e?"en"===e?"fr":"en":""};return c.a.createElement(ee.a,{bg:"dark",variant:"dark",expand:"lg",className:"nav-container section"},c.a.createElement(ee.a.Brand,null,c.a.createElement("img",{src:Z.a,alt:"logo"}),c.a.createElement("span",null,"World\xa0of\xa0Warcraft\xa0Wiki")),c.a.createElement(ee.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(ee.a.Collapse,{className:"justify-content-end"},c.a.createElement(te.a,{className:"justify-content-end"},c.a.createElement(g.b,{className:"nav-link",to:"/mounts"},s("mounts.title")),c.a.createElement(g.b,{className:"nav-link",to:"/characters"},s("characters.title")),c.a.createElement(g.b,{className:"nav-link",to:"/pets"},s("pets.title")),c.a.createElement($.a,{onClick:function(){var e=l(a);u.changeLanguage(e),n(e)}},l(a)))))};var ne=function(){var e=Object(v.a)("common").t;return c.a.createElement("footer",{className:"py-1 bg-dark text-white",style:{fontSize:"10pt"}},e("footer.copyright"))};a(111);var re=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(g.a,null,c.a.createElement(ae,null),c.a.createElement("div",{className:"app-body"},c.a.createElement(h.c,null,c.a.createElement(h.a,{exact:!0,path:"/",component:K}),c.a.createElement(h.a,{path:"/characters",component:b}),c.a.createElement(h.a,{path:"/mounts",component:K}),c.a.createElement(h.a,{path:"/pets",component:V})))),c.a.createElement(ne,null))},ce=Object(x.a)({reducer:{mounts:F}}),oe=a(115),se=a(43),ue=a(63),le=a(64);se.a.init({interpolation:{escapeValue:!1},lng:"en",resources:{en:{common:ue},fr:{common:le}}}),s.a.render(c.a.createElement(E.a,{store:ce},c.a.createElement(oe.a,{i18n:se.a},c.a.createElement(re,null))),document.getElementById("root"))},61:function(e,t,a){e.exports=a.p+"static/media/favicon.158b0ed2.svg"},63:function(e){e.exports=JSON.parse('{"characters":{"title":"Characters","name-query":"Enter your character name:"},"mounts":{"title":"Mounts"},"pets":{"title":"Pets"},"common":{"load":"Load","loading":"Loading"},"footer":{"copyright":"\xa92004 Blizzard Entertainment, Inc. All rights reserved. World of Warcraft, Warcraft and Blizzard Entertainment are trademarks or registered trademarks of Blizzard Entertainment, Inc. in the U.S. and/or other countries."}}')},64:function(e){e.exports=JSON.parse('{"characters":{"title":"Personnages","name-query":"Saisir le nom de votre personnage :"},"mounts":{"title":"Montures"},"pets":{"title":"Familiers"},"common":{"load":"Charger","loading":"Chargement"},"footer":{"copyright":"\xa92004 Blizzard Entertainment, Inc. Tous droits r\xe9serv\xe9s. World of Warcraft, Warcraft et Blizzard Entertainment sont des marques ou des marques d\xe9pos\xe9es de Blizzard Entertainment, Inc. aux \xc9tats-Unis d\u2019Am\xe9rique et/ou dans d\u2019autres pays."}}')},69:function(e,t,a){e.exports=a(112)},74:function(e,t,a){}},[[69,1,2]]]);
//# sourceMappingURL=main.38f2d155.chunk.js.map