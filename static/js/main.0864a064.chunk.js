(this["webpackJsonpwow-wiki"]=this["webpackJsonpwow-wiki"]||[]).push([[0],{110:function(e,t,n){},111:function(e,t,n){},113:function(e,t,n){},114:function(e,t,n){},116:function(e,t,n){},118:function(e,t,n){},119:function(e,t,n){},120:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),o=n(22),s=n.n(o),u=(n(62),n(24)),l=n(25),i=n(26),m=n(29),d=n(28),p=n(121),f=function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).state={value:""},a.handleCharacterSearch=a.handleCharacterSearch.bind(Object(i.a)(a)),a}return Object(l.a)(n,[{key:"handleCharacterSearch",value:function(e){var t=e.target.value,n=t.length>=1?t.substr(0,1).toUpperCase()+t.substr(1,t.length).toLowerCase():t;this.setState({value:n})}},{key:"render",value:function(){var e=this.props.t;return c.a.createElement("div",{className:"Characters"},c.a.createElement("h1",null,"Work in progress - not working"),c.a.createElement("h2",null,e("characters.title")),c.a.createElement("form",{onSubmit:null},c.a.createElement("label",null,e("characters.name-query"),c.a.createElement("input",{type:"text",value:this.state.value,onChange:this.handleCharacterSearch})),c.a.createElement("input",{type:"submit",value:e("common.load")})))}}]),n}(r.Component),h=Object(p.a)("common")(f),b=n(3),v=n(47),g=n(11),E=n(14),O=n(12),j=n(4),k=n.n(j),y=n(13),x=n(18),w=n(19),M=n(56),z=n(32),N=n.n(z),S="e1d9b7f970f44229bda1942d09d3ce97";function C(){return _.apply(this,arguments)}function _(){return(_=Object(y.a)(k.a.mark((function e(){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("...Requesting Auth Token"),e.next=3,N.a.post("https://us.battle.net/oauth/token",{},{auth:{username:"".concat(S),password:"".concat("68t8Dc1UBHEX3oQC3nMLXKINoQ7Mz4Ik")},params:{grant_type:"client_credentials"}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return B.apply(this,arguments)}function B(){return(B=Object(y.a)(k.a.mark((function e(){var t,n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=localStorage.getItem("blizzard_token"),n=localStorage.getItem("blizzard_token_expire_time"),null===t){e.next=7;break}if(null===n){e.next=7;break}if(Math.floor(Date.now()/1e3)>n-900){e.next=7;break}return e.abrupt("return",t);case 7:return e.next=9,C().then((function(e){t=e.data.access_token;var n=Math.floor(Date.now()/1e3)+e.data.expires_in;return console.log("... Putting in local storage blizzard_token : "+t),localStorage.setItem("blizzard_token",e.data.access_token),console.log("... Putting in local storage blizzard_token_expire_time : "+n),localStorage.setItem("blizzard_token_expire_time",n),e.data.access_token}),(function(e){return console.log("Blizzard API - error while fetching access token :"+e),null}));case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function W(e){return A.apply(this,arguments)}function A(){return(A=Object(y.a)(k.a.mark((function e(t){var n,a,r,c,o,s,u=arguments;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=u.length>1&&void 0!==u[1]?u[1]:{},a=n.body,r=Object(M.a)(n,["body"]),e.next=3,I();case 3:return c=e.sent,o={"Content-Type":"application/json"},s=Object(w.a)(Object(w.a)({method:a?"POST":"GET"},r),{},{headers:Object(w.a)(Object(w.a)(Object(w.a)({},o),r.headers),{},{Authorization:"Bearer ".concat(c)}),validateStatus:function(e){return 200===e}}),a&&(s.body=JSON.stringify(a)),e.abrupt("return",N()(t,Object(w.a)({},s)).then((function(e){return e}),(function(e){return Promise.reject(e.message)})));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}W.getMountIndex=function(){var e=Object(y.a)(k.a.mark((function e(t,n,a){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("https://eu.api.blizzard.com/data/wow/mount/index",{params:{region:"".concat(t),namespace:"".concat(n),locale:"".concat(a)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a){return e.apply(this,arguments)}}(),W.getMountById=function(){var e=Object(y.a)(k.a.mark((function e(t,n,a,r){return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W("https://eu.api.blizzard.com"+"/data/wow/mount/".concat(t),{params:{region:"".concat(n),namespace:"".concat(a),locale:"".concat(r)}});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,a,r){return e.apply(this,arguments)}}();var L=Object(x.b)("mounts/fetchMounts",Object(y.a)(k.a.mark((function e(){var t;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getMountIndex("eu","static-eu","fr_FR");case 2:return t=e.sent,e.abrupt("return",t.data.mounts);case 4:case"end":return e.stop()}}),e)})))),P=Object(x.b)("mounts/fetchMountById",function(){var e=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,W.getMountById(t,"eu","static-eu","fr_FR");case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),q=Object(x.b)("mounts/fetchMountAsset",function(){var e=Object(y.a)(k.a.mark((function e(t){var n;return k.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=7;break}return e.next=3,W(t.creature_displays[0].key.href);case 3:return n=e.sent,e.abrupt("return",n.data);case 7:return e.abrupt("return",Promise.reject("Need a mount object in order to fetch its asset"));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),F=Object(x.c)({name:"mounts",initialState:{data:[],status:"idle",error:null,selectedMount:null,selectedMountAsset:"",selectedMountStatus:"idle",selectedMountError:null},reducers:{newMountClicked:function(e){e.selectedMount=null,e.selectedMountAsset="",e.selectedMountStatus="idle",e.selectedMountError=null}},extraReducers:(a={},Object(O.a)(a,L.pending,(function(e){e.status="loading"})),Object(O.a)(a,L.fulfilled,(function(e,t){e.status="succeeded",e.data=e.data.concat(t.payload)})),Object(O.a)(a,L.rejected,(function(e,t){e.status="failed",e.error=t.payload})),Object(O.a)(a,P.pending,(function(e){e.selectedMountStatus="loading"})),Object(O.a)(a,P.fulfilled,(function(e,t){e.selectedMountStatus="succeeded",e.selectedMount=t.payload})),Object(O.a)(a,P.rejected,(function(e,t){e.selectedMountStatus="failed",e.selectedMountError=t.payload})),Object(O.a)(a,q.fulfilled,(function(e,t){e.selectedMountAsset=t.payload.assets[0].value})),a)}),T=F.actions.newMountClicked,J=F.reducer,R=n(51),U=n.n(R),D=(n(110),function(e){var t=e.text;return c.a.createElement("div",{className:"loader"},c.a.createElement("span",null,t," "),c.a.createElement(U.a,{className:"loader-spinner",type:"Oval",color:"#00BFFF",height:15,width:15}))});n(111);var Q=function(){var e,t=Object(g.b)(),n=Object(v.a)("common").t,a=Object(g.c)((function(e){return e.mounts.data})),o=Object(g.c)((function(e){return e.mounts.status}));if(Object(r.useEffect)((function(){"idle"===o&&t(L())}),[o,t]),"loading"===o)e=c.a.createElement(D,{text:n("common.loading")});else if("succeeded"===o){e=a.slice().sort((function(e,t){return e.name.localeCompare(t.name)})).map((function(e){return c.a.createElement(E.b,{key:e.id,className:"nav-list-row",to:"/mounts/".concat(e.id)},e.name)}))}else"failed"===o&&(e=c.a.createElement("div",null,"Couldn't load mounts"));return c.a.createElement("div",{className:"nav-list section"},e)};n(113);var X=function(e){var t,n=e.match.params.mountId,a=Object(g.b)(),o=Object(v.a)("common").t,s=Object(g.c)((function(e){return e.mounts.selectedMount})),u=Object(g.c)((function(e){return e.mounts.selectedMountStatus})),l=Object(g.c)((function(e){return e.mounts.selectedMountAsset}));return Object(r.useEffect)((function(){"idle"!==u&&a(T())}),[n,a]),Object(r.useEffect)((function(){"idle"===u&&a(P(n))}),[u,a]),Object(r.useEffect)((function(){s&&a(q(s))}),[s,a]),"loading"===u?t=c.a.createElement(D,{text:o("common.loading")}):"succeeded"===u?t=c.a.createElement("div",null,c.a.createElement("div",{className:"mount-name"},s.name),c.a.createElement("div",{className:"mount-desc"},s.description),c.a.createElement("img",{src:l,alt:s.name})):"failed"===u&&(t=c.a.createElement("div",null,"The mount id ",n," does not exist.")),c.a.createElement("div",{className:"mount-viewer section"},t)},G=(n(114),function(){var e=Object(v.a)("common").t;return c.a.createElement("div",{className:"Mounts"},c.a.createElement("h2",null,e("mounts.title")),c.a.createElement("div",{className:"mounts-nav-container"},c.a.createElement(Q,null),c.a.createElement("div",{className:"spacer"}),c.a.createElement(b.a,{path:"/mounts/:mountId",component:X}),c.a.createElement("div",{className:"spacer"})))});var H=function(){var e=Object(v.a)("common").t;return c.a.createElement("div",{className:"Pets"},c.a.createElement("h1",null,"Work in progress - not working"),c.a.createElement("h2",null,e("pets.title")))},K=n(52),V=n.n(K),Y=n(53),Z=n.n(Y),$=(n(116),n(117),function(e){Object(m.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(u.a)(this,n),(a=t.call(this,e)).handleBurgerOpen=function(){a.setState((function(e){return{burgerOpen:!e.burgerOpen}}))},a.handleLangChange=function(){var e=a.props.i18n;a.setState((function(t){var n=t.lang,r=a.getNextLang(n);return e.changeLanguage(r),{lang:r}}))},a.state={burgerOpen:!1,lang:"en"},a}return Object(l.a)(n,[{key:"getNextLang",value:function(e){return"en"===e?"fr":"en"}},{key:"render",value:function(){var e=this.props.t,t=this.state,n=t.burgerOpen,a=t.lang,r=this.getNextLang(a);return c.a.createElement("div",{className:"nav-container section"},c.a.createElement("div",{className:"nav"},c.a.createElement(V.a,{isOpen:n,onClick:this.handleBurgerOpen}),c.a.createElement("div",{className:"nav-logo"},c.a.createElement("img",{src:Z.a,alt:"logo"}),c.a.createElement("h3",null,"World\xa0of\xa0Warcraft\xa0Wiki")),c.a.createElement("div",{className:"spacer"}),c.a.createElement("div",{className:"nav-links"},c.a.createElement(E.b,{to:"/characters"},e("characters.title")),c.a.createElement(E.b,{to:"/mounts"},e("mounts.title")),c.a.createElement(E.b,{to:"/pets"},e("pets.title"))),c.a.createElement("div",{className:"nav-lang"},c.a.createElement("button",{onClick:this.handleLangChange},r))))}}]),n}(r.Component)),ee=Object(p.a)("common")($);n(118);var te=function(){var e=Object(v.a)("common").t;return c.a.createElement("div",{className:"footer"},e("footer.copyright"))};n(119);var ne=function(){return c.a.createElement("div",{className:"app"},c.a.createElement(E.a,null,c.a.createElement(ee,null),c.a.createElement("div",{className:"app-body"},c.a.createElement(b.c,null,c.a.createElement(b.a,{exact:!0,path:"/",component:G}),c.a.createElement(b.a,{path:"/characters",component:h}),c.a.createElement(b.a,{path:"/mounts",component:G}),c.a.createElement(b.a,{path:"/pets",component:H})))),c.a.createElement("div",{className:"spacer"}),c.a.createElement(te,null))},ae=Object(x.a)({reducer:{mounts:J}}),re=n(122),ce=n(35),oe=n(54),se=n(55);ce.a.init({interpolation:{escapeValue:!1},lng:"en",resources:{en:{common:oe},fr:{common:se}}}),s.a.render(c.a.createElement(g.a,{store:ae},c.a.createElement(re.a,{i18n:ce.a},c.a.createElement(ne,null))),document.getElementById("root"))},53:function(e,t,n){e.exports=n.p+"static/media/favicon.158b0ed2.svg"},54:function(e){e.exports=JSON.parse('{"characters":{"title":"Characters","name-query":"Enter your character name:"},"mounts":{"title":"Mounts"},"pets":{"title":"Pets"},"common":{"load":"Load","loading":"Loading"},"footer":{"copyright":"\xa92004 Blizzard Entertainment, Inc. All rights reserved. World of Warcraft, Warcraft and Blizzard Entertainment are trademarks or registered trademarks of Blizzard Entertainment, Inc. in the U.S. and/or other countries."}}')},55:function(e){e.exports=JSON.parse('{"characters":{"title":"Personnages","name-query":"Saisir le nom de votre personnage :"},"mounts":{"title":"Montures"},"pets":{"title":"Familiers"},"common":{"load":"Charger","loading":"Chargement"},"footer":{"copyright":"\xa92004 Blizzard Entertainment, Inc. Tous droits r\xe9serv\xe9s. World of Warcraft, Warcraft et Blizzard Entertainment sont des marques ou des marques d\xe9pos\xe9es de Blizzard Entertainment, Inc. aux \xc9tats-Unis d\u2019Am\xe9rique et/ou dans d\u2019autres pays."}}')},57:function(e,t,n){e.exports=n(120)},62:function(e,t,n){}},[[57,1,2]]]);
//# sourceMappingURL=main.0864a064.chunk.js.map